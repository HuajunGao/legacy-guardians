# 需求文档模块划分

## 🎯 **模块划分原则**

### 划分标准
- **功能独立性**: 每个模块相对独立，减少耦合
- **开发并行性**: 不同开发者可以并行开发不同模块
- **测试友好性**: 模块化便于单元测试和集成测试
- **维护便利性**: 清晰的模块边界便于维护和扩展

## 🏗️ **核心模块架构**

```
Legacy Guardians 游戏系统
├── 🎮 游戏核心模块
├── 🎨 用户界面模块
├── 🧠 AI系统模块
├── 📊 数据管理模块
├── 🔧 工具和配置模块
└── 📚 文档和测试模块
```

## 🎮 **游戏核心模块**

### 1. 资产管理系统 (Asset Management)
**负责人**: 待分配  
**优先级**: 🔴 高  
**依赖**: 无

#### 功能范围
- 资产类型定义和管理
- 资产权重分配算法
- 收益率计算逻辑
- 风险评估系统

#### 核心文件
- `src/components/GameArea.tsx` - 资产分配界面
- `src/hooks/useGameState.ts` - 资产状态管理
- `src/constants/assets.json` - 资产配置
- `src/utils/game-logic.ts` - 游戏逻辑

#### 开发任务
- [ ] 实现动态资产类型
- [ ] 优化权重分配算法
- [ ] 添加风险评估指标
- [ ] 实现资产组合优化

### 2. 任务系统 (Task System)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 资产管理系统

#### 功能范围
- 任务生成和分配
- 任务完成条件检查
- 任务奖励系统
- 任务进度追踪

#### 核心文件
- `src/constants/tasks.json` - 任务配置
- `src/components/GameArea.tsx` - 任务显示
- `src/hooks/useGameState.ts` - 任务状态

#### 开发任务
- [ ] 设计任务生成算法
- [ ] 实现任务奖励机制
- [ ] 添加任务难度等级
- [ ] 实现任务链系统

### 3. 市场事件系统 (Market Events)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 资产管理系统

#### 功能范围
- 随机事件生成
- 事件影响计算
- 事件选择机制
- 事件历史记录

#### 核心文件
- `src/constants/events.json` - 事件配置
- `src/components/GameArea.tsx` - 事件显示
- `src/hooks/useGameState.ts` - 事件状态

#### 开发任务
- [ ] 扩展事件类型
- [ ] 实现事件连锁反应
- [ ] 添加事件预测系统
- [ ] 优化事件平衡性

## 🎨 **用户界面模块**

### 4. 主界面组件 (Main UI Components)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 游戏核心模块

#### 功能范围
- 顶部状态栏
- 侧边栏信息显示
- 主游戏区域布局
- 响应式设计

#### 核心文件
- `src/components/TopBar.tsx`
- `src/components/Sidebar.tsx`
- `src/components/GameLayout.tsx`

#### 开发任务
- [ ] 优化移动端适配
- [ ] 添加主题切换动画
- [ ] 实现拖拽功能
- [ ] 添加键盘快捷键

### 5. 弹窗和模态框 (Modals & Dialogs)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 游戏核心模块

#### 功能范围
- 公司信息编辑
- AI聊天界面
- 决策选择弹窗
- 知识测验界面

#### 核心文件
- `src/components/Modals.tsx`
- 各种弹窗组件

#### 开发任务
- [ ] 优化弹窗动画
- [ ] 添加拖拽功能
- [ ] 实现弹窗堆叠
- [ ] 添加无障碍支持

### 6. 浮动功能 (Floating Features)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 游戏核心模块

#### 功能范围
- 每日转盘
- AI聊天按钮
- 快捷操作菜单

#### 核心文件
- `src/components/FloatingButtons.tsx`

#### 开发任务
- [ ] 优化转盘动画
- [ ] 添加转盘音效
- [ ] 实现快捷操作
- [ ] 添加手势支持

## 🧠 **AI系统模块**

### 7. AI伙伴系统 (AI Companion)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 聊天界面

#### 功能范围
- AI对话逻辑
- 智能建议系统
- 学习用户偏好
- 个性化反馈

#### 核心文件
- `src/constants/ai-partner.json`
- `src/components/Modals.tsx` (AI聊天部分)

#### 开发任务
- [ ] 集成ChatGPT API
- [ ] 实现智能建议
- [ ] 添加个性化学习
- [ ] 优化对话体验

### 8. 决策训练系统 (Decision Training)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 游戏核心模块

#### 功能范围
- 决策场景生成
- 选择结果分析
- 学习进度追踪
- 个性化训练计划

#### 核心文件
- `src/hooks/useGameState.ts` (决策相关)
- `src/components/Modals.tsx` (决策弹窗)

#### 开发任务
- [ ] 设计决策场景库
- [ ] 实现结果分析
- [ ] 添加学习追踪
- [ ] 优化训练算法

## 📊 **数据管理模块**

### 9. 游戏状态管理 (Game State Management)
**负责人**: 待分配  
**优先级**: 🔴 高  
**依赖**: 无

#### 功能范围
- 全局状态管理
- 状态持久化
- 状态同步
- 状态回滚

#### 核心文件
- `src/hooks/useGameState.ts`
- `src/utils/game-logic.ts`

#### 开发任务
- [ ] 实现状态持久化
- [ ] 添加状态同步
- [ ] 实现状态回滚
- [ ] 优化状态性能

### 10. 数据存储和缓存 (Data Storage & Caching)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 游戏状态管理

#### 功能范围
- 本地存储管理
- 数据缓存策略
- 数据同步机制
- 数据备份恢复

#### 核心文件
- `src/utils/game-logic.ts`
- 新增存储工具文件

#### 开发任务
- [ ] 实现本地存储
- [ ] 设计缓存策略
- [ ] 添加数据同步
- [ ] 实现备份恢复

## 🔧 **工具和配置模块**

### 11. 配置管理系统 (Configuration Management)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 无

#### 功能范围
- 游戏配置管理
- 环境配置
- 用户偏好设置
- 配置验证

#### 核心文件
- `src/constants/game-config.ts`
- 各种配置文件

#### 开发任务
- [ ] 统一配置管理
- [ ] 添加配置验证
- [ ] 实现配置热更新
- [ ] 添加配置导入导出

### 12. 工具函数库 (Utility Functions)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 无

#### 功能范围
- 数学计算工具
- 日期时间处理
- 数据格式化
- 验证工具

#### 核心文件
- `src/utils/game-logic.ts`
- 新增工具文件

#### 开发任务
- [ ] 实现数学工具
- [ ] 添加日期处理
- [ ] 实现数据格式化
- [ ] 添加验证工具

## 📚 **文档和测试模块**

### 13. 测试系统 (Testing System)
**负责人**: 待分配  
**优先级**: 🟡 中  
**依赖**: 各功能模块

#### 功能范围
- 单元测试
- 集成测试
- E2E测试
- 测试覆盖率

#### 核心文件
- 测试配置文件
- 各模块测试文件

#### 开发任务
- [ ] 设置测试框架
- [ ] 编写单元测试
- [ ] 实现集成测试
- [ ] 添加E2E测试

### 14. 文档系统 (Documentation System)
**负责人**: 待分配  
**优先级**: 🟢 低  
**依赖**: 各功能模块

#### 功能范围
- API文档
- 组件文档
- 用户手册
- 开发指南

#### 核心文件
- 各种文档文件
- 文档生成配置

#### 开发任务
- [ ] 生成API文档
- [ ] 编写组件文档
- [ ] 创建用户手册
- [ ] 完善开发指南

## 🚀 **开发优先级矩阵**

| 模块 | 优先级 | 预估工时 | 依赖关系 | 推荐开发者 |
|------|--------|----------|----------|------------|
| 资产管理系统 | 🔴 高 | 40h | 无 | 核心开发者 |
| 游戏状态管理 | 🔴 高 | 32h | 无 | 核心开发者 |
| 任务系统 | 🟡 中 | 24h | 资产管理 | 功能开发者 |
| 市场事件系统 | 🟡 中 | 20h | 资产管理 | 功能开发者 |
| AI伙伴系统 | 🟡 中 | 28h | 聊天界面 | AI开发者 |
| 决策训练系统 | 🟡 中 | 24h | 游戏核心 | 功能开发者 |
| 数据存储缓存 | 🟡 中 | 16h | 状态管理 | 后端开发者 |
| 测试系统 | 🟡 中 | 20h | 各模块 | 测试开发者 |
| 主界面组件 | 🟢 低 | 16h | 游戏核心 | UI开发者 |
| 弹窗模态框 | 🟢 低 | 12h | 游戏核心 | UI开发者 |
| 浮动功能 | 🟢 低 | 8h | 游戏核心 | UI开发者 |
| 配置管理 | 🟢 低 | 12h | 无 | 工具开发者 |
| 工具函数库 | 🟢 低 | 16h | 无 | 工具开发者 |
| 文档系统 | 🟢 低 | 20h | 各模块 | 文档开发者 |

## 📋 **协作开发建议**

### 并行开发策略
1. **第一阶段**: 核心模块并行开发
   - 资产管理系统 + 游戏状态管理
   
2. **第二阶段**: 功能模块并行开发
   - 任务系统 + 市场事件系统 + AI伙伴系统
   
3. **第三阶段**: 界面和工具并行开发
   - UI组件 + 工具函数 + 配置管理
   
4. **第四阶段**: 测试和文档并行开发
   - 测试系统 + 文档系统

### 团队角色建议
- **核心开发者**: 负责高优先级核心模块
- **功能开发者**: 负责游戏功能模块
- **UI开发者**: 负责用户界面模块
- **AI开发者**: 负责AI相关功能
- **测试开发者**: 负责测试和质量保证
- **文档开发者**: 负责文档和用户指南

---

*最后更新: 2024-12-19*
*更新原因: 建立需求文档模块划分，便于团队协作开发*
